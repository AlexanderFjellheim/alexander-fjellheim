---
import { CollectionEntry, getCollection } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import FormattedDate from '../components/FormattedDate.astro';
import Card from '../components/Card.astro';
import { SITE_TITLE } from '../consts';
import Contact from '../components/Contact.astro';

type Props = CollectionEntry<'blog'>['data'];

const { title, description, pubDate, updatedDate, heroImage, heroImage2, heroImage3, heroImage4, category, role, team, duration, technologies} = Astro.props;


var posts = (await getCollection("blog"));


---

<html lang="en">
	<head>
		<BaseHead title={SITE_TITLE} description={title} />

	</head>

	<body>
		<Header />
		<main>
			<div class="container">
				<div class="preview">
					<button><img src={heroImage}/></button>
					<button><img src={heroImage2}/></button>
					<button><img src={heroImage3}/></button>
					<button><img src={heroImage4}/></button>
				</div>
				<img class="product" id="product" src={heroImage} />
				<div class="description">
					<p>Rolle 👨‍💻<br>
						{role}</p>

					<p>Team 👥<br>
						{team?.map((elem) => (
							<span>{"- "+elem}<br></span>
						))}</p>

					<p>Varighet 🕘<br> 
						{duration}</p>
					<p>Teknologier 🧮<br> 
						{technologies?.map((elem) => (
							<span>{"- "+elem}<br></span>
						))}</p>
				</div>
			</div>

			<div class="inspiration">
				<slot/>
			</div>

			<div class="suggestions">

				{/* <p class="category-title">{category == undefined ? "Other" : category}</p> */}
				<p class="category-title">Lignende prosjekter:</p>
				<div class="section-container">
				{posts.filter((post) => post.data.category == category && post.data.title != title).map((post) => (
					<Card
					title={post.data.title}
					src={post.data.heroImage}
					href={`/blog/${post.slug}/`}
				  >
					</Card>
				  ))}  
				</div>

			</div>

			<Contact />

		</main>
		<Footer />
	</body>
</html>


<style>
	.container {
		margin-top: 3rem;
		display: grid;
		grid-template-columns: 10% 40% 20%;
		grid-gap: 15%;
	}


	.preview button {
		cursor: pointer;
		aspect-ratio: 1;
		padding: 0;
		margin: 0;
		margin-bottom: 1rem;
		border: none;
		transition: ease-out 0.15s;
	}

	.preview button:hover {
		box-shadow: 0 5px 0 #444444;
	}

	.preview img {
		width: 100%;
	}


	.product {
		width: 100%;		
	}
	.description {

		display: grid;
		grid-template-columns: 1fr;
		grid-template-rows: auto auto auto auto;
		grid-row-gap: 4px;
	}

	.description > * {
		padding-left: 1rem;
		padding-right: 0.5rem;
		/*background-color: #686868;*/
		height: 100%;
		margin: 0;
		margin-bottom: 0.5em;
		font-weight: 400;
	}

	.description > p::first-line {
		color: orange;
		font-weight: 700;
	}

	.category-title {
		color: orange;
		font-weight: 700;

	}


	.inspiration {
		max-width: 720px;
	}



	hr {
		border-top: 1px solid #ddd;
		margin: 1rem 0;
	}
	.last-updated-on {
		font-style: italic;
	} */
</style>

<script>
	const productImage = document.getElementById("product");

	function selectImage(button) {
		if (productImage) {
			productImage.src = button.src;
		}
		else {
			alert("Error productImage null")
		}
	}

	const buttons = document.querySelectorAll(".preview button");

	buttons.forEach((button) => {
		button.addEventListener('click', () => selectImage(button.firstChild));
	});
</script>